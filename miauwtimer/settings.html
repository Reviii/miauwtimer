<html>
<head>
<title>Instellingen voor miauwtimer</title>
</head>
<body>
<label><input type="checkbox" id="autostart">autostart</label><br>
<label><input type="checkbox" id="autofill">autofill</label><br>
<div style="position: relative;left: 2em;" id="autofill_settings">
    <label><input type="checkbox" id="autofill_o">bel van onderbouw</label><br>
    <label><input type="checkbox" id="autofill_b">bel van bovenbouw</label><br>
    <label><input type="checkbox" id="autofill_other_default">andere tijden:</label><input id="autofill_other_default_content"><br>
    <label><input type="checkbox" id="autofill_other_short">andere tijden bij verkort rooster:</label><input id="autofill_other_short_content">
</div><br>
<script>
var settings = JSON.parse(localStorage.miauwtimersettings);
if (!settings) {
    settings = {autostart: false, autofill: {enabled: true, o: true, b: true, other: {default: {enabled: false, content: ""}, short: {enabled: false, content: ""} }}};
}
function elem(id) { return document.getElementById(id); }

elem("autostart").checked = settings.autostart;
elem("autofill").checked = settings.autofill.enabled;
elem("autofill_o").checked = settings.autofill.o;
elem("autofill_b").checked = settings.autofill.b;
elem("autofill_other_default").checked = settings.autofill.other.default.enabled;
elem("autofill_other_default_content").value = settings.autofill.other.default.content;
elem("autofill_other_short").checked = settings.autofill.other.short.enabled;
elem("autofill_other_short_content").value = settings.autofill.other.short.content;
updateSettings()
 
function updateSettings() {
    settings.autostart = elem("autostart").checked;
    settings.autofill.enabled = elem("autofill").checked;
    settings.autofill.o = elem("autofill_o").checked;
    settings.autofill.b = elem("autofill_b").checked;
    settings.autofill.other.default.enabled = elem("autofill_other_default").checked;
    settings.autofill.other.default.content = elem("autofill_other_default.content").value;
    settings.autofill.other.short.enabled = elem("autofill_other_short").checked;
    settings.autofill.other.short.content = elem("autofill_other_short_content").value;
    localStorage.miauwtimersettings = JSON.stringify(settings);
    if (settings.autofill.enabled) {
        elem("autofill_settings").style.opacity = 1;
        elem("autofill_settings").style.pointerEvents = "auto";
    } else {
        elem("autofill_settings").style.opacity = 0.5;
        elem("autofill_settings").style.pointerEvents = "none";
    }
}
document.addEventListener("click", updateSettings);
</script>
</body>
</html>
