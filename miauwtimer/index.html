<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
<link rel="manifest" href="/favicon/site.webmanifest">
<link rel="mask-icon" href="/favicon/safari-pinned-tab.svg" color="#0000ff">
<link rel="shortcut icon" href="/favicon/favicon.ico">
<meta name="msapplication-TileColor" content="#00ffff">
<meta name="msapplication-config" content="/favicon/browserconfig.xml">
<meta name="theme-color" content="#ffffff">
<title>Miauwtimer</title>
<style>
div {
    border-style: none;
    position: absolute;
    left: 0%;
    top: 0%;
    width: 100%;
    height: 100%;
}
img {
    border-style: none;
    position: absolute;
    left: 0%;
    top: 0%;
    width: 100%;
    height: 100%;
}
</style>
</head>
<body>
<!-- Versie 19 sep 2019 -->
<input id="input"><button onClick="start()" id="knop">aftellen!</button>
<p id="demo" style="visibility:hidden;font-size: 100px;text-align:center"></p><div>
<img src=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAAtJREFUCB1jYAACAAAFAAGNu5vzAAAAAElFTkSuQmCC  onclick="thema(nm+1)" alt="" /></div>

<script>
if (localStorage.miauwtimersettings) {
    var settings = JSON.parse(localStorage.miauwtimersettings);
} else {
    var settings = {autostart: false, autofill: {enabled: true, o: true, b: true, other: {default: {enabled: false, content: ""}, short: {enabled: false, content: ""} }}};
}
var klok = false
var klok2 = setInterval(klokje, 50);

document.getElementsByTagName("DIV")[0].style.display = "none"
var nm = 0
var arrkleur1 = ["#000000", "#ff0000", "#00ff00", "#0000ff", "#00ffff", "#ff00ff", "#ffff00", "#ffffff"]
var arrkleur2 = ["#ffffff", "#00ffff", "#ff00ff", "#ffff00", "#ff0000", "#00ff00", "#0000ff", "#000000"]
nml = 1
function thema(nml) {
nm = nml
while (nm > 7) { 
nm = nm-8
}
document.body.style.backgroundColor = arrkleur2[nm];
document.getElementById("demo").style.color = arrkleur1[nm]
document.getElementsByTagName("DIV")[0].style.display = "none"
setTimeout(function() {document.getElementsByTagName("DIV")[0].style.display = "block"; }, 1)
nml = nm+1
}

function toets(event) {
var omnum = "74561230".split("")
var x = String.fromCharCode(event.keyCode)
if (x == "i") {
thema(omnum[nm])
}
var i
var kleurkeys = "krgbcmyw".split("")
for (i=0;i<8;i++) {
if (kleurkeys[i] == x || i == x) {
thema(i)
}
}
}

function pijl(event) {
if (event.keyCode == 37 || event.keyCode == 38) {
thema(nm+7)
}
if (event.keyCode == 39 || event.keyCode == 40) {
thema(nm+1)
}
}

bel()
function bel() {
if (settings.autofill.enabled) {
var belsec =   [29700,32400,35100,37800, 38700, 41400, 44100, 45900, 48600, 51300, 51600, 54300, 57000]
var beltijd =  "8:15 9:00 9:45 10:30 10:45 11:30 12:15 12:45 13:30 14:15 14:20 15:05 15:50".split(" ")
var t1 = new Date();
var t = t1.getHours()*3600+t1.getMinutes()*60+t1.getSeconds()+t1.getMilliseconds()/1000;
var text = beltijd[0]
var i = 1
while (i < belsec.length) {
if (t < belsec[i] && t >= belsec[i-1]) {
text = beltijd[i]
}
i++
}
document.getElementById("input").value = text
}
}

function start() {
document.getElementById("input").style.visibility = "hidden"
document.getElementById("knop").style.visibility  = "hidden"
document.getElementById("demo").style.visibility = "visible"
document.getElementsByTagName("DIV")[0].style.display = "block"
document.getElementById("demo").innerHTML = ""
document.body.addEventListener("keypress", toets)
document.body.addEventListener("keydown", pijl)
klok = true
functie()
}

var d
function functie() {
d = new Date();
var x = document.getElementById("input").value
if (x.toLowerCase() == "heeft revi dit gemaakt?") {
alert("Ja")
}
x = x.split(":");
d.setHours(x[0]);
if (x.length > 1) {
d.setMinutes(x[1]);
} else {
d.setMinutes(0);
}
if (x.length > 2) {
d.setSeconds(x[2]);
} else {
d.setSeconds(0);
}
d.setMilliseconds(0)
var e = new Date();
var f = d.getTime() /1000 - e.getTime() / 1000;
if (f < 0) {
d.setDate(d.getDate() + 1);
f = f+86400
}
if (Number.isNaN(f)) {
    setTimeout(reset, 500)
}
if (klok) {
document.getElementById("demo").innerHTML = Math.ceil(f);
}
}

function klokje() {
if (klok) {
var f = d - new Date()
f=f/1000
document.getElementById("demo").innerHTML = Math.ceil(f);
if (document.getElementById("demo").innerHTML < 0) {
reset();
}
}
}

function reset() {
document.getElementById("input").style.visibility = "visible"
document.getElementById("knop").style.visibility = "visible"
document.getElementById("demo").style.visibility = "hidden"
document.body.removeEventListener("keypress", toets)
document.body.removeEventListener("keydown", pijl)
klok = false
bel()
if (settings.autostart) {
start()
}
}

if (settings.autostart) {
start()
}
</script>

</body>
</html>
